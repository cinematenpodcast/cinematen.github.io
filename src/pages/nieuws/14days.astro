---
// Import necessary components
import BaseHead from "../../components/BaseHead.astro";
import BaseHeader from "../../components/BaseHeader.astro";
import BaseScript from "../../components/BaseScript.astro";
import BaseFooter from "../../components/BaseFooter.astro";
import BaseNavmenu from "../../components/BaseNavmenu.astro";
import BaseNieuwsItem from "../../components/BaseNieuwsItem.astro"; // Corrected component name from Niews to Nieuws

const allNieuwsPosts = await Astro.glob('./*.md');

// Define the date threshold (replace 'your_date_string' with the desired date)
const thresholdDate = new Date('2024-05-04');

// Filter posts based on the threshold date
const filteredPosts = allNieuwsPosts.filter(post => new Date(post.frontmatter.date) >= thresholdDate);

---

<html lang="nl">
    <head>
        <BaseHead/>
    </head>
    <body class="body">
        <div class="page-wrapper">
            <BaseNavmenu />
            <BaseHeader />
            <div class="content">
                <div class="container">
                    <h1 class="nieuws-title">Film & TV nieuws</h1>
                    <div class="w-layout-grid nieuws-list">
                        {filteredPosts
                            .sort((a, b) => new Date(b.frontmatter.date) - new Date(a.frontmatter.date)) // Sort by date, newest to oldest
                            .map((post) => (
                                <BaseNieuwsItem
                                    key={post.url}
                                    url={post.url}
                                    title={post.frontmatter.title}
                                    thumbnail={post.frontmatter.thumbnail}
                                    date={post.frontmatter.date}
                                    content={post.rawContent}
                                />
                            ))}
                    </div>
                </div>
            </div>
            <BaseFooter />
        </div>
        <BaseScript />
    </body>
</html>
