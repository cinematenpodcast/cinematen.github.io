---

import BaseNavmenu from "../components/BaseNavmenu.astro";
import BaseHeader from "../components/BaseHeader.astro";
import BaseFooter from "../components/BaseFooter.astro";
import BaseScript from "../components/BaseScript.astro";
import BasePodcastBanner from "../components/BasePodcastBanner.astro";
const { frontmatter } = Astro.props;

// Function to format the date and adjust for timezone
function formatDate(dateString) {
    const date = new Date(dateString);
    if (isNaN(date.getTime())) return ""; // Return empty string if date is invalid
    const options = {
        timeZone: "UTC",
        hour12: false,
        hour: "numeric",
        minute: "numeric",
    }; // Set the timezone to UTC and format the hour and minute without seconds
    const formattedDate = date.toLocaleDateString("nl-NL", {
        day: "2-digit",
        month: "2-digit",
        year: "numeric",
    });
    const timePart = date.toLocaleTimeString("nl-NL", options);
    return timePart === "00:00"
        ? formattedDate
        : `${formattedDate} ${timePart}`; // Return only date if time is midnight, otherwise combine date and time
}

// Format the date
const formattedDateTime = formatDate(frontmatter.date);

export async function getStaticPaths() {
  const posts = await getCollection("blog");
  return posts.map((post) => ({
    params: { slug: createSlug(post.data.title) },
    props: post,
  }));
}
type Props = CollectionEntry<"blog">;

---

<html lang="nl">
    <head>
        <meta charset="utf-8" />
        <title>Cinematen.be</title>
        <meta
            content=<slot />
            
            name="description"
        />
        <meta content={frontmatter.title} property="og:title" />
        <meta
            content=
            
            <slot />

            property="og:description"
        />
        <meta content="./images/Cinematelogotrans.png" property="og:image" />
        <meta content={frontmatter.title} property="twitter:title" />
        <meta
            content=

            <slot />

            property="twitter:description"
        />
        <meta content="./images/Cinematelogotrans.png" property="twitter:image" />
        <meta content="website" property="og:type" />
        <meta content="summary_large_image" name="twitter:card" />
        <meta content="width=device-width, initial-scale=1" name="viewport" />
        <meta content={frontmatter.title} />
        <link href="/style.css" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com" rel="preconnect" />
        <link
            crossorigin="anonymous"
            href="https://fonts.gstatic.com"
            rel="preconnect"
        />
        <script
            src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"
            type="text/javascript"></script>
        <script type="text/javascript">
            WebFont.load({
                google: {
                    families: [
                        "Rubik:300,regular,500,600,700,800,900,300italic,italic,500italic,600italic,700italic,800italic,900italic",
                        "Rubik Mono One:regular",
                    ],
                },
            });
        </script>
        <script type="text/javascript">
            !(function (o, c) {
                var n = c.documentElement,
                    t = " w-mod-";
                (n.className += t + "js"),
                    ("ontouchstart" in o ||
                        (o.DocumentTouch && c instanceof DocumentTouch)) &&
                        (n.className += t + "touch");
            })(window, document);
        </script>
        <script src="/script.js" defer></script>
        <link href="./images/favicon.ico" rel="shortcut icon" type="image/x-icon" />
        <link href="./images/webclip.png" rel="apple-touch-icon" />
        <style>
            * {
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }
        </style>
    </head>
    <body class="body">
        <div class="page-wrapper">
            <BaseNavmenu />
            <BaseHeader />
            <div
                data-w-id="75dba001-0326-9ad8-ca3e-3734b81d7ff9"
                class="content"
            >
                <div class="container">
                    <a
                        href="#"
                        target="_blank"
                        class="terug-knop w-inline-block"
                    >
                        <div class="terug-div">
                            <img
                                src="https://assets-global.website-files.com/6613d9d7c23cff2286422b25/66145e1f24aa75e6e8efe154_pijl.svg"
                                loading="lazy"
                                width="10"
                                alt=""
                                class="image-4"
                            />
                            <div onclick="goBack()" class="terugknop-text">
                                Terug
                            </div>
                        </div>
                    </a>
                    <div class="content-left">
                        <div class="blog-post-container">
                            <div
                                id="w-node-_834894ef-45d4-3601-08c4-adde27664434-01535055"
                                class="blog-header"
                            >
                                <div
                                    id="w-node-b6eeaddc-234a-634b-164b-ca588e2dae68-01535055"
                                    class="blog-image-wrap"
                                >
                                    <img
                                        src={frontmatter.thumbnail}
                                        width="Auto"
                                        sizes="(max-width: 479px) 100vw, (max-width: 767px) 77vw, 42vw"
                                        class="blog-image"
                                    />
                                </div>
                                <div
                                    id="w-node-b6eeaddc-234a-634b-164b-ca588e2dae6a-01535055"
                                    class="blog-title"
                                >
                                    <h2 class="heading-h2 nieuws-cat">
                                        {frontmatter.soort} nieuws
                                    </h2>
                                    <h2 class="heading-h2 blog-title">
                                        {frontmatter.title}
                                    </h2>
                                    <!-- Check if formattedDateTime is not empty before rendering -->
                                    {
                                        formattedDateTime && (
                                            <p class="paragraph-detials-small">
                                                {formattedDateTime}
                                            </p>
                                        )
                                    }
                                </div>
                            </div>
                            <div
                                id="w-node-_2957b33b-ee9d-a9a8-80b3-56ea90e637f9-01535055"
                                class="blog-text w-richtext"
                            >
                                <slot />
                                {frontmatter.trailer && 
                                    <div id="trailer">
                                        <h2 style="text-align: center; margin-top: 20px;">Bekijk hier de trailer:</h2>
                                        <div class="video-container">
                                            <div class="video-wrapper">
                                                <iframe src={`https://www.youtube-nocookie.com/embed/${frontmatter.trailer}`} title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                                            </div>
                                        </div>
                                    </div>
                                    }       
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <BasePodcastBanner />
            <BaseFooter />
        </div>
        <BaseScript />
    </body>
</html>
