---
import BaseHeadNieuws from "../components/BaseHeadNieuws.astro";
import NewNavmenu from "../components/NewNavmenu.astro";
import BaseHeader from "../components/BaseHeader.astro";
import BaseFooter from "../components/BaseFooter.astro";
import BaseScript from "../components/BaseScript.astro";
import BasePodcastBanner from "../components/BasePodcastBanner.astro";
const { frontmatter } = Astro.props;

// Generate canonical URL
const canonicalURL = `https://cinematen.be${Astro.url.pathname}`;

// Function to format the date and adjust for timezone
function formatDate(dateString) {
    const date = new Date(dateString);
    if (isNaN(date.getTime())) return ""; // Return empty string if date is invalid
    const options = {
        timeZone: "UTC",
        hour12: false
    }; // Set the timezone to UTC
    const formattedDate = date.toLocaleDateString("nl-NL", {
        day: "2-digit",
        month: "2-digit",
        year: "numeric",
    });
    const timePart = date.toLocaleTimeString("nl-NL", options);
    return timePart === "00:00"
        ? formattedDate
        : `${formattedDate} ${timePart}`; // Return only date if time is midnight, otherwise combine date and time
}

// Format the date
const formattedDateTime = formatDate(frontmatter.date);
---

<html lang="nl">
    <head>
        
      <BaseHeadNieuws
          title={frontmatter.title}
          thumbnail={frontmatter.thumbnail} 
          content={frontmatter.summary}
          canonicalURL={canonicalURL}
          publishedDate={frontmatter.date}
          modifiedDate={frontmatter.date}
          author="Yorrick"
        />
        <!-- Note: BaseHeadNieuws might use thumbnail for OG tags, which is fine even if not displayed on page -->
      
    </head>
    <body class="body">
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const links = document.querySelectorAll('.blog-text a');
                links.forEach(link => {
                    if (link.hostname !== window.location.hostname) {
                        link.target = '_blank';
                        link.rel = 'noopener noreferrer';
                    }
                });
            });
        </script>
        <div class="page-wrapper">
            <NewNavmenu />
            <BaseHeader />
            <div
                data-w-id="75dba001-0326-9ad8-ca3e-3734b81d7ff9"
                class="content"
            >
                <div class="container">
                    <div class="content-left">
                        <div class="blog-post-container" style="width: 100%">
                            <!-- Title removed as requested -->
                            <div
                                id="w-node-_2957b33b-ee9d-a9a8-80b3-56ea90e637f9-01535055"
                                class="blog-text w-richtext"
                            >
                                <slot />     
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <BasePodcastBanner />
            <BaseFooter />
        </div>
        <BaseScript />
        <style is:global>
            /* Override default rich text figure width for this specific layout on mobile */
            @media screen and (max-width: 767px) {
                .w-richtext figure,
                .w-richtext .w-richtext-figure-type-image,
                .w-richtext figure.w-richtext-figure-type-image {
                    max-width: 100% !important;
                    width: 100% !important;
                    margin-left: 0 !important;
                    margin-right: 0 !important;
                }
                
                .w-richtext figure img,
                .w-richtext img {
                    width: 100% !important;
                    max-width: 100% !important;
                    height: auto !important;
                }

                .blog-post-container {
                    padding-left: 20px !important;
                    padding-right: 20px !important;
                    width: 100% !important;
                    box-sizing: border-box !important;
                }
                
                /* Fix any potential overflow or constraint from parent containers */
                .content-left {
                     width: 100% !important;
                }

                /* Ensure long URLs break on mobile */
                .blog-text {
                    word-break: break-word;
                    overflow-wrap: break-word;
                }
            }
        </style>
    </body>
</html>

